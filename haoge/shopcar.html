<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
		<meta name="format-detection" content="telephone=no" />
		<title>购物车</title>
		<link rel="stylesheet" type="text/css" href="css/reset.css" />
		<link rel="stylesheet" type="text/css" href="css/icon.css" />
		<link rel="stylesheet" type="text/css" href="css/public.css" />
		<link rel="stylesheet" type="text/css" href="css/layout.css" />
		
		<style type="text/css">
			#wrapper {
				padding-bottom: 60px;
			}
		</style>
	</head>

	<body>
		<div id="wrapper">
			<ul id="car-list" class="car-list">
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-jian-"></i></span>
									<!--图 27px --><input type="number" class="input" value="2" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-jian-"></i></span>
									<!--图 27px --><input type="number" class="input" value="2" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-jian-"></i></span>
									<!--图 27px --><input type="number" class="input" value="2" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-jian-"></i></span>
									<!--图 27px --><input type="number" class="input" value="2" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-jian-"></i></span>
									<!--图 27px --><input type="number" class="input" value="2" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-shanchu-"></i></span>
									<!--图 27px --><input type="number" class="input" value="1" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li>
					<div class="item clearfix">
						<img class="fl lazyload" data-original="img/replace/list_img.png" />
						<div class="text fl">
							<div class="title over_1">豪格HG-201电解水机 多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水多功能制水</div>
							<div class="title2">型号：XPLJH</div>
							<div class="sub-title">￥666.00</div>
							<div class="bottom clearfix">
								<div class="btns fr">
									<!-- 如果是一件商品显示删除图标，否则就是 - 号 -->
									<span class="minus"><i class="iconfont icon-shanchu-"></i></span>
									<!--图 27px --><input type="number" class="input" value="1" /><span class="add"><i class="iconfont icon-jia-"></i></span>
								</div>
							</div>
						</div>
					</div>
				</li>
			</ul>
			<div id="empty" class="hide">
				<div class="empty-wrap empty-data">
					<img style="width: 30%;" src="img/empty.png">
					<p>购物车什么也没有~</p>
					<a href="#" class="btn btn-primary" style="width: 30%; margin: 0 auto;">返回首页</a>
				</div>
			</div>
		</div>
		<div class="detail-footer clearfix" style="line-height: 49px;">
			<i id="empty-car" class="iconfont icon-shanchu-" style="margin-left: 10px; color: #c92c73; font-size: 24px;"></i>
			<div class="wrap fr fv">
				<section>
					<p>合计：<span class="price">￥666.00</span></p>
				</section>
				<section class="button">去结算</section>
			</div>
		</div>

		<script src="js/jquery-1.12.4.min.js"></script>
		<script src="js/jquery.lazyload.min.js"></script>
		<script src="js/tools.js"></script>
		<script src="js/iscroll.js"></script>
		<script src="js/common.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				const MAX = 9999;
				
				lazyloadimg();

				$('#car-list').delegate('.add', 'click', function() {
					var _this = $(this);
					var prev = _this.prev();
					var val = parseInt(prev.val());
					val++;
					val = Math.min(MAX, val);
					prev.val(val);
					update(prev.prev(), false);
				});
				$('#car-list').delegate('.minus', 'click', function() {
					var _this = $(this);
					var next = _this.next();
					var val = parseInt(next.val());
					val--;
					if(val === 0) {
						delFun(this);
					}
					val = Math.max(1, val);
					if(val === 1) {
						update(this, true);
					} else {
						update(this, false);
					}
					next.val(val);
				});
				$('#car-list').delegate('.input', 'blur', function() {
					var _this = $(this);
					var val = parseInt(_this.val());
					var __this = _this.prev()[0];
					if(val === 1) {
						update(__this, true);
					} else {
						update(__this, false);
					}
					if(val > MAX || val < 1 || isNaN(val)) {
						reset(this);
						Tools.toast('亲~商品数量必须在1~' + MAX + '之间');
					}
				});
				//清空购物车
				$('#empty-car').click(function() {
					Tools.alert('亲，你确定要清空所有商品吗？', function() {
						//删除成功
						Tools.showIndicator();
						setTimeout(function() {
							//删除成功
							Tools.hideIndicator();
							$('#car-list').html('');
							Tools.toast('清空成功');
						}, 1000);
					}, true);
				});

				function reset(_this) {
					_this.value = 1;
					$(_this).prev().find('.iconfont').addClass('icon-shanchu-').removeClass('icon-jian-');
				}

				function update(_this, isMin) {
					var icon = $(_this).find('.iconfont');
					console.log(isMin);
					if(isMin) {
						icon.addClass('icon-shanchu-').removeClass('icon-jian-');
					} else {
						icon.removeClass('icon-shanchu-').addClass('icon-jian-');
					}
				}

				function delFun(_this) {
					//删除商品
					Tools.alert('你确定要删除该商品吗？', function() {
						//模拟 1s
						Tools.showIndicator();
						setTimeout(function() {
							//删除成功
							Tools.hideIndicator();
							$(_this).parents('li').remove();
							Tools.toast('删除成功');
						}, 1000);
					}, true);
				}
			})
		</script>
	</body>

</html>