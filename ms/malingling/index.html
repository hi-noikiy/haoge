<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>个人资料补充</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">

    <link href="css/layout.min.css" rel="stylesheet" />
    <link href="css/scs.min.css" rel="stylesheet" />


    <link rel="stylesheet" href="css/weui.min.css">
    <link rel="stylesheet" href="css/jquery-weui.min.css">
    <link rel="stylesheet" href="css/index.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.scs.min.js"></script>
    <script src="js/CNAddrArr.min.js"></script>
    <script src="js/jquery-weui.min.js"></script>

</head>
<body>

<div class="media-box">
    <div class="header">
        <img src="images/header-img.jpg">
    </div>
    <!--信息-->
    <div class="message-warp">
        <div class="message">
            <!--我的信息-->
            <div class="me">
                <div class="meassage-title">我的信息</div>
                <div class="weui-cells weui-cells_form">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">QQ号码</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input qq" type="number"  placeholder="请输入您的QQ号码">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">工作单位</label></div>
                        <div class="weui-cell__bd">
                            <textarea class="weui-input weui-textarea jobaddress" placeholder="请输入您的工作单位"></textarea>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">家庭住址</label></div>
                        <div class="weui-cell__bd  city ">
                            <input type="text" readonly placeholder="选择省市" id="myAddrs" name="addr" data-key="4-84-1298" class="fam_address" />
                            <div class="radio"></div>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">详细住址</label></div>
                        <div class="weui-cell__bd">
                            <textarea class="weui-input weui-textarea address" placeholder="请输入您的详细家庭地址"></textarea>
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">证件上传</label></div>
                        <div class="weui-cell__bd" >
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label"></label></div>
                        <div class="weui-cell__bd  id" >
                            <div class="weui-uploader__input-box">
                                <input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*" multiple="">
                            </div>
                            <p>身份证正面</p>
                        </div>
                    </div>
                </div>
            </div>

            <!--父母信息-->
            <div class="parents">
                <div class="meassage-title">父母信息</div>
                <div class="weui-cells weui-cells_form">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">父亲姓名</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input name"  placeholder="请输入您父亲姓名">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">联系方式</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input tep" type="number" placeholder="请输入您父亲的联系方式">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">工作地址</label></div>
                        <div class="weui-cell__bd">
                            <textarea class="weui-input weui-textarea address" placeholder="请输入您父亲工作地址"></textarea>
                        </div>
                    </div>

                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">母亲姓名</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input name"  placeholder="请输入您母亲姓名">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">联系方式</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input tep" type="number"   placeholder="请输入您母亲的联系方式">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">工作地址</label></div>
                        <div class="weui-cell__bd">
                            <textarea class="weui-input weui-textarea address" placeholder="请输入您母亲工作地址"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!--常用联系人-->
            <div class="user-warp">
                <div class="use">
                    <div class="meassage-title">我的常用联系人1</div>
                    <div class="weui-cells weui-cells_form">
                        <div class="weui-cell">
                            <div class="weui-cell__hd"><label class="weui-label">关系</label></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input relation"  placeholder="请输入您们之间的关系">
                            </div>
                        </div>
                        <div class="weui-cell">
                            <div class="weui-cell__hd"><label class="weui-label">姓名</label></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input name"   placeholder="请输入您常用联系人的姓名">
                            </div>
                        </div>
                        <div class="weui-cell">
                            <div class="weui-cell__hd"><label class="weui-label">电话</label></div>
                            <div class="weui-cell__bd">
                                <input class="weui-input tep" type="number"  placeholder="请输入您常用联系人的电话"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="add">
                <div class="add-icon"></div>
                <ul>
                    <li>关系</li>
                    <li>|</li>
                    <li>姓名</li>
                    <li>|</li>
                    <li>电话</li>
                </ul>
            </div>

            <!--账户信息-->
            <div class="user">
                <div class="meassage-title">账户信息</div>
                <div class="weui-cells weui-cells_form">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">淘宝账号</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input taobao"  placeholder="请输入您的淘宝账号">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">账号密码</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input passward"  placeholder="请输入您的淘宝账号密码">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">美团账号</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input meituan"  placeholder="请输入您的美团账号">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">账号密码</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input passward"  placeholder="请输入您的美团账号密码">
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="submit">提交上传</div>
</div>

</body>
</html>

<script>
// 点击添加常用联系人
    var num = 1;
    $('.add').click(function () {
         num ++;
        var list = $('<div class="use"> <div class="meassage-title">我的常用联系人'+ num +' <div class="add-icon delect"></div> </div> <div class="weui-cells weui-cells_form"> <div class="weui-cell"> <div class="weui-cell__hd"><label class="weui-label">关系</label></div> <div class="weui-cell__bd"> <input class="weui-input relation"  placeholder="请输入您们之间的关系"> </div> </div> <div class="weui-cell"> <div class="weui-cell__hd"><label class="weui-label">姓名</label></div> <div class="weui-cell__bd"> <input class="weui-input name"   placeholder="请输入您常用联系人的姓名"> </div> </div> <div class="weui-cell"> <div class="weui-cell__hd"><label class="weui-label">电话</label></div> <div class="weui-cell__bd"> <input class="weui-input tep" type="number"   placeholder="请输入您常用联系人的电话"/> </div> </div> </div> </div>');
        $('.user-warp').append(list)
        console.log(2)
        $(this).siblings().find('.delect').click(function () {
            alert('3')
            $(this).parent().parent().remove()
        })
    })

    //输入框验证  仅验证了我的信息部分
    $('.submit').click(function () {
        var qq_s=/^\d{5,10}$/; //qq
        var qq = $('.qq').val();
        var job = $('.jobaddress').val();
        var address = $('.address').val();
        var fam = $('.fam_address').val();


        if (qq==""){
            $.alert("请输入QQ号");
        }
        else if (!(qq_s.test(qq))){
            $.alert("请输入正确的QQ号");
        }
        else if (job==""){
            $.alert("工作单位不能为空");
        }
        else if (fam==""){
            $.alert("请选择省份");
        }
        else if (address==""){
            $.alert("详细地址不能为空");
        }
        else {
            $.alert("我的信息验证");
        }

    })
</script>

<!--下拉选择省份-->
<script>
    $(function() {
        /**
         * 通过数组id获取地址列表数组
         *
         * @param {Number} id
         * @return {Array}
         */
        function getAddrsArrayById(id) {
            var results = [];
            if (addr_arr[id] != undefined)
                addr_arr[id].forEach(function(subArr) {
                    results.push({
                        key: subArr[0],
                        val: subArr[1]
                    });
                });
            else {
                return;
            }
            return results;
        }
        /**
         * 通过开始的key获取开始时应该选中开始数组中哪个元素
         *
         * @param {Array} StartArr
         * @param {Number|String} key
         * @return {Number}
         */
        function getStartIndexByKeyFromStartArr(startArr, key) {
            var result = 0;
            if (startArr != undefined)
                startArr.forEach(function(obj, index) {
                    if (obj.key == key) {
                        result = index;
                        return false;
                    }
                });
            return result;
        }

        //bind the click event for 'input' element
        $("#myAddrs").click(function() {
            var PROVINCES = [],
                    startCities = [],
                    startDists = [];
            //Province data，shall never change.
            addr_arr[0].forEach(function(prov) {
                PROVINCES.push({
                    key: prov[0],
                    val: prov[1]
                });
            });
            //init other data.
            var $input = $(this),
                    dataKey = $input.attr("data-key"),
                    provKey = 1, //default province 北京
                    cityKey = 36, //default city 北京
                    distKey = 37, //default district 北京东城区
                    distStartIndex = 0, //default 0
                    cityStartIndex = 0, //default 0
                    provStartIndex = 0; //default 0

            if (dataKey != "" && dataKey != undefined) {
                var sArr = dataKey.split("-");
                if (sArr.length == 3) {
                    provKey = sArr[0];
                    cityKey = sArr[1];
                    distKey = sArr[2];

                } else if (sArr.length == 2) { //such as 台湾，香港 and the like.
                    provKey = sArr[0];
                    cityKey = sArr[1];
                }
                startCities = getAddrsArrayById(provKey);
                startDists = getAddrsArrayById(cityKey);
                provStartIndex = getStartIndexByKeyFromStartArr(PROVINCES, provKey);
                cityStartIndex = getStartIndexByKeyFromStartArr(startCities, cityKey);
                distStartIndex = getStartIndexByKeyFromStartArr(startDists, distKey);
            }
            var navArr = [{//3 scrollers, and the title and id will be as follows:
                title: "省",
                id: "scs_items_prov"
            }, {
                title: "市",
                id: "scs_items_city"
            }, {
                title: "区",
                id: "scs_items_dist"
            }];
            SCS.init({
                navArr: navArr,
                onOk: function(selectedKey, selectedValue) {
                    $input.val(selectedValue).attr("data-key", selectedKey);
                }
            });
            var distScroller = new SCS.scrollCascadeSelect({
                el: "#" + navArr[2].id,
                dataArr: startDists,
                startIndex: distStartIndex
            });
            var cityScroller = new SCS.scrollCascadeSelect({
                el: "#" + navArr[1].id,
                dataArr: startCities,
                startIndex: cityStartIndex,
                onChange: function(selectedItem, selectedIndex) {
                    distScroller.render(getAddrsArrayById(selectedItem.key), 0); //re-render distScroller when cityScroller change
                }
            });
            var provScroller = new SCS.scrollCascadeSelect({
                el: "#" + navArr[0].id,
                dataArr: PROVINCES,
                startIndex: provStartIndex,
                onChange: function(selectedItem, selectedIndex) { //re-render both cityScroller and distScroller when provScroller change
                    cityScroller.render(getAddrsArrayById(selectedItem.key), 0);
                    distScroller.render(getAddrsArrayById(cityScroller.getSelectedItem().key), 0);
                }
            });
        });
    });
</script>